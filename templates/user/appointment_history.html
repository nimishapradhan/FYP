{% extends 'main/dashboard.html' %}
{% load static %}
{% block content %}

<main class="content px-3 py-2">
    <!-- Table Element -->
    <div class="card border-0">
        <div class="container py-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="fs-4">My Appointment History</div>
                <!-- Add appointment button with link to the booking page -->
                <a href="{% url 'appointment_booking' %}" class="text-decoration-none">
                    <button type="button" class="book-appointment-btn btn btn-green">Book
                        appointment</button>
                </a>
            </div>

            <table class="table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Doctor / Vet</th>
                        <th>Appointment Type</th>
                        <th>Total Cost</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for app in appointment %}
                    <tr>
                        <td>{{ app.date }}</td>
                        <td>{{ app.time }}</td>
                        <td>{{ app.doctor.user.first_name }} {{ app.doctor.user.last_name }}</td>
                        <td>{{ app.service.title }}</td>
                        <td>NPR. {{ app.service.price }}</td>
                        {% if app.status == 1 %}
                        <td><i class="fa fa-check-circle text-success"></i></td>
                        {% else %}
                        <td><i class="fa fa-times-circle text-danger"></i></td>
                        {% endif %}
                        <td>
                            <a href="{% url 'user_appointment_detail' id=app.id %}" class="btn btn-primary" title="View appointment"><i class="fa fa-eye"></i></a>
                            <a href="{% url 'user_cancel_appointment' id=app.id %}"
                                class="btn btn-danger delete-appointment" title="Cancel appointment"
                                data-appointment-id="" onclick="return confirm('Do you want to cancel appointment?')">
                                <i class="fa fa-cancel"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
</main>

{% endblock %}