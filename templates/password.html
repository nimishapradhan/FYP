{% extends "base.html" %}

{% load static %}

{% block title %} Forget Password {% endblock %}

{% block content %}
<div class="container">
  <div class="row py-5">
    <!-- Image on the Left Side -->
    <div class="col-md-6 col-12">
      <img src="{% static 'img9.jpg' %}" alt="Forget Password Image" class="img-fluid" style="border-radius: 10px; width: 100%; height: auto;">
    </div>

    <!-- Forget Password Form on the Right Side -->
    <div class="col-md-6 col-12">
      <div class="forget-password-container ">
        <h2>Forget Password</h2>
        {% if error %}
            <p class="error-message">{{ error }}</p>
        {% endif %}

        
        {% if not otp_sent %}
        <p>Enter your email address to reset your password.</p>
        
        <form class="forget-password-form" action="{% url 'passwordreset' %}" method="post">
          {% csrf_token %} 
          <!-- Email Input Field -->
          <label for="email">Email:</label>
          <input
            class="form-control"
            type="email"
            id="email"
            name="email"
            required
            style="border: 1px solid #ccc; margin-bottom: 2rem;"
          />

          <!-- Reset Password Button -->
          <div class="text-center" style="margin-top: 2rem;">
            <button
              type="submit"
              class="btn btn-success"
              style="
                background-color: #4CAF50;
                color: white;
                padding: 10px 15px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 16px;
              "
            >
              Reset Password
            </button>
          </form>
          {% else %} {% if otp_sent %}
            <p>Enter OTP</p>
        
            <form class="forget-password-form" action="{% url 'verify_otp' %}" method="post">
              {% csrf_token %} 
              <!-- Email Input Field -->
              <label for="otp">OTP:</label>
              <input
                class="form-control"
                type="text"
                id="otp"
                name="otp"
                required
                style="border: 1px solid #ccc; margin-bottom: 2rem;"
              />
    
              <div class="text-center" style="margin-top: 2rem;">
                <button
                  type="submit"
                  class="btn btn-success"
                  style="
                    background-color: #4CAF50;
                    color: white;
                    padding: 10px 15px;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 16px;
                  "
                >
                Verify OTP
                </button>
          </div>
        </form>
        {% endif %}
        {% endif %} 
      </div>
    </div>
  </div>
</div>
{% endblock %}
